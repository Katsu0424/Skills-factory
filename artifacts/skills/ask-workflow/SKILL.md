---
name: ask-workflow
description: |
  曖昧なタスク依頼を対話で明確化し、適切なアクションに導く。
  コード生成、デバッグ、設計相談、調査、リファクタなどの意図を分類し、
  不足情報を質問して確認後に実行する。曖昧な依頼時に自動適用。
allowed-tools: Read, Write, Edit, Grep, Glob, AskUserQuestion
---

# 汎用askスキル

## 呼び出し方
曖昧なタスク依頼時に自動的に適用

## 目的
曖昧なタスク依頼を対話で明確化し、適切なアクションに導く

---

## フロー

```
ユーザー入力 → 意図分類 → 不足情報の質問 → 確認 → 実行
```

---

## 意図分類

| カテゴリ | トリガーワード例 |
|----------|------------------|
| コード生成 | 作って、実装して、書いて |
| デバッグ | 動かない、エラー、バグ |
| 設計相談 | どうすべき、比較、選び方 |
| 調査 | 調べて、なぜ、仕組み |
| リファクタ | 直して、改善、きれいに |
| その他 | （上記に該当しない） |

---

## カテゴリ別質問テンプレート

### コード生成
1. 何を作る？（機能の概要）
2. 使用言語/フレームワークは？
3. 既存コードとの関係は？（新規/追加/修正）
4. 制約は？（パフォーマンス、互換性など）
5. 出力形式は？（ファイル/クリップボード/説明付き）

### デバッグ
1. 何が起きてる？（エラーメッセージ/期待と実際の差）
2. 再現手順は？
3. いつから？（最近の変更との関係）
4. 関連コード/ログはある？

### 設計相談
1. 解決したい問題は？
2. 検討中の選択肢は？
3. 重視する観点は？（保守性/パフォーマンス/開発速度）
4. 制約は？（チーム規模、既存システム）

### 調査
1. 何について知りたい？
2. 現在の理解度は？
3. 目的は？（学習/実装/トラブルシュート）
4. 深さは？（概要/詳細/網羅的）

### リファクタ
1. どの部分を改善したい？
2. 現在の問題点は？（可読性/パフォーマンス/重複）
3. 制約は？（後方互換性、テストの有無）
4. 優先度は？（今すぐ/将来的に）

---

## 確認フォーマット

すべての情報が揃ったら、実行前に以下の形式で確認する：

```
以下の理解で合ってますか？

- タスク: （やること）
- 対象: （何に対して）
- 条件: （制約・要件）
- 出力: （成果物の形式）

[はい] で実行、[修正] で訂正してください。
```

---

## 質問のガイドライン

- 一度に聞く質問は2-3個まで
- 明らかに推測できる情報は質問しない
- 既存のコンテキストから読み取れる情報は活用する
- ユーザーの回答が曖昧な場合は具体例を示して再確認

---

## 例

### 入力
「ログイン機能作って」

### 対話
```
コード生成のリクエストですね。いくつか確認させてください：

1. 認証方式は？（セッション/JWT/OAuth）
2. 使用するフレームワークは？
3. 既存のユーザーモデルはありますか？
```

### ユーザー回答
「JWTで、Express使ってる。ユーザーモデルはある」

### 確認
```
以下の理解で合ってますか？

- タスク: JWTベースのログイン機能を実装
- 対象: Expressアプリケーション
- 条件: 既存のユーザーモデルを使用
- 出力: ログインエンドポイントのコード

[はい] で実行、[修正] で訂正してください。
```
