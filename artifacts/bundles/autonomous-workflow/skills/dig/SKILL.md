---
name: dig
description: |
  ユーザーの要求から曖昧な点を特定し、構造化された質問で明確化する。
  新しいタスク依頼時や要件が曖昧な場合に使用。
  スコープ/技術/UX/品質/運用の5カテゴリで曖昧点を洗い出し、2〜4個の質問で解消する。
allowed-tools: Read, Write, Edit, Grep, Glob, TodoRead, TodoWrite, AskUserQuestion
context: fork
agent: Explore
---

# dig

曖昧性解消スキル - ユーザーの要求から曖昧な点を特定し、構造化された質問で明確化する

## トリガー

- ユーザーからの新しいタスク依頼時
- 要件が曖昧または不完全な場合
- `/dig` コマンド実行時

## 目的

タスク実行前に曖昧性を解消し、明確な決定事項リストを作成する

---

## 入力

- ユーザーからのタスク依頼（自然言語）

## 出力

- 決定事項リスト（Markdown形式）

---

## 処理フロー

### 1. コンテキスト収集

依頼内容に関連する情報を収集する：

- 既存コードベースの構造
- 関連ファイル・モジュール
- 技術スタック・依存関係
- 既存のパターン・規約

### 2. 曖昧点の特定

以下の5カテゴリで曖昧点を洗い出す：

| カテゴリ | 確認観点 |
|----------|----------|
| **スコープ** | 対象範囲、境界、除外事項 |
| **技術** | 使用技術、アーキテクチャ、実装方針 |
| **UX** | ユーザー体験、UI、インタラクション |
| **品質** | テスト要件、パフォーマンス、セキュリティ |
| **運用** | デプロイ、監視、ログ、エラーハンドリング |

### 3. 構造化質問の生成

曖昧点から **2〜4個** の質問を生成する：

- 各質問は1つの決定事項に対応
- 選択肢を提示（可能な場合）
- 推奨案があれば明示

### 4. ユーザーへの質問

生成した質問をユーザーに提示し、回答を収集する。

### 5. 決定事項リストの作成

回答を元に決定事項リストを作成：

```markdown
## 決定事項

| 項目 | 決定内容 | 理由 |
|------|----------|------|
| スコープ | ... | ... |
| 技術方針 | ... | ... |
| ... | ... | ... |
```

---

## 質問テンプレート

```markdown
## 確認事項

以下の点を確認させてください。

### 1. [カテゴリ] [質問内容]

選択肢:
- A: [選択肢A] ← 推奨
- B: [選択肢B]
- C: その他（具体的に教えてください）

### 2. [カテゴリ] [質問内容]

...
```

---

## 制約

- 質問は **2〜4個** に絞る（多すぎると負担）
- 自明な事項は質問しない
- コンテキストから推測できることは仮説として提示
- 質問できない場合は、仮定を明示して進める

---

## 次のスキル

決定事項リスト完成後 → `decompose` スキルへ
