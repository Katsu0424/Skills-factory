---
name: decompose
description: |
  決定事項を元に実行可能な粒度のタスクリストを作成する。
  digスキル完了後、または/decomposeコマンド実行時に使用。
  5〜30分単位のタスクに分解し、What/Where/How/Why/Done whenを明記。
allowed-tools: Read, Write, Edit, Grep, Glob, TodoRead, TodoWrite, AskUserQuestion
context: fork
agent: Explore
---

# decompose

タスク分解スキル - 決定事項を元に実行可能な粒度のタスクリストを作成する

## トリガー

- `dig` スキル完了後
- 決定事項リストが存在する場合
- `/decompose` コマンド実行時

## 目的

決定事項を **5〜30分単位** の実行可能なタスクに分解し、構造化されたTODOリストを作成する

---

## 入力

- 決定事項リスト（`dig` スキルの出力）
- タスクの全体概要

## 出力

- TODOリスト（構造化されたタスク一覧）

---

## タスク形式

各タスクは以下の5項目を含む：

| 項目 | 説明 | 例 |
|------|------|-----|
| **What** | 何をするか | ユーザー認証APIを実装する |
| **Where** | どこで（ファイル/モジュール） | `src/api/auth.ts` |
| **How** | どのように（具体的な手順） | JWTトークンを使用、有効期限24h |
| **Why** | なぜ必要か | セッション管理のため |
| **Done when** | 完了条件 | テスト通過、認証フロー動作確認 |

---

## 処理フロー

### 1. 決定事項の分析

決定事項リストから：
- 必要な機能・変更を抽出
- 依存関係を特定
- 技術的制約を確認

### 2. タスクの分割

以下の基準でタスクを分割：

- **粒度**: 5〜30分で完了できる単位
- **独立性**: 可能な限り独立して実行可能
- **検証可能**: 完了を客観的に判定できる

### 3. 依存関係の整理

```
タスク1: 基盤実装
    ↓
タスク2: 機能A実装 ─┬─ タスク3: 機能B実装
                   ↓
タスク4: 統合・テスト
```

### 4. TODOリストの生成

---

## 出力テンプレート

```markdown
## TODOリスト

### タスク1: [タスク名]

| 項目 | 内容 |
|------|------|
| What | [何をするか] |
| Where | [対象ファイル/モジュール] |
| How | [具体的な手順] |
| Why | [理由] |
| Done when | [完了条件] |

依存: なし
推定: [5-30]分

---

### タスク2: [タスク名]

| 項目 | 内容 |
|------|------|
| What | [何をするか] |
| Where | [対象ファイル/モジュール] |
| How | [具体的な手順] |
| Why | [理由] |
| Done when | [完了条件] |

依存: タスク1
推定: [5-30]分

---

...
```

---

## 分割のガイドライン

### 良い分割

- ファイル単位で分ける
- 機能単位で分ける
- テストを別タスクにする
- 設定変更を別タスクにする

### 避けるべき分割

- 1行の変更を1タスクにする（細かすぎ）
- 複数機能を1タスクにまとめる（大きすぎ）
- 依存関係が循環する分割

---

## 制約

- タスク数は **3〜10個** を目安
- 各タスクは **5〜30分** で完了できる粒度
- 完了条件は **客観的に判定可能** であること
- 依存関係を明示すること

---

## 次のスキル

TODOリスト完成後 → `evaluate` スキルへ
