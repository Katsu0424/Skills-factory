# Autonomous Workflow Bundle

自律エージェントワークフロー - Plan & Dig → Do Phase の2段階構成

## 概要

```
┌─────────────────────────────────────────────────────────────────┐
│  Plan & Dig Phase                                               │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [Dig] 曖昧性解消                                               │
│    ├─ コンテキスト収集                                          │
│    ├─ カテゴリ別に曖昧点特定                                    │
│    │   (スコープ/技術/UX/品質/運用)                             │
│    ├─ 構造化質問（2〜4個）                                      │
│    └─ 出力: 決定事項リスト                                      │
│                         ↓                                       │
│  [Decompose] タスク分解                                         │
│    ├─ 決定事項を元に分割                                        │
│    ├─ 各タスクに What/Where/How/Why/Done when                   │
│    └─ 出力: TODOリスト（5〜30分単位）                           │
│                         ↓                                       │
│  [Evaluate] 評価・承認                                          │
│    ├─ 評価エージェントがチェック                                │
│    └─ ユーザー承認 ← 介入ポイント                               │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  Do Phase（自律ループ）                                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌────────────────────────────────────┐                        │
│  │         指揮者 (Conductor)          │                        │
│  │  状況判断で次のエージェントを選択   │                        │
│  └──────────────┬─────────────────────┘                        │
│                 │                                               │
│       ┌─────────┼─────────┐                                    │
│       ↓         ↓         ↓                                    │
│   ┌──────┐  ┌──────┐  ┌──────────┐                            │
│   │ 実装 │  │ 検証 │  │ レビュー │                            │
│   └──────┘  └──────┘  └──────────┘                            │
│                           │                                     │
│                           └─ 完了判定も兼任                     │
│                              ・Done when 確認                   │
│                              ・全テスト通過                     │
│                              ・lint エラー 0                    │
│                              ・ビルド成功                       │
│                                                                 │
│  判断パターン:                                                  │
│    開始 → 実装 → 検証 → レビュー → 完了                        │
│              ↑      │       │                                   │
│              └──────┴───────┘ (NG時は実装へ戻る)               │
│                                                                 │
│  エスカレーション: 3回失敗 → ユーザーへ                         │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
                              ↓
┌─────────────────────────────────────────────────────────────────┐
│  完了                                                           │
├─────────────────────────────────────────────────────────────────┤
│  全タスク完了後 → ユーザーに最終確認 ← 介入ポイント            │
└─────────────────────────────────────────────────────────────────┘
```

## 決定事項

| 項目 | 決定内容 |
|------|----------|
| 曖昧性のカテゴリ | スコープ/技術/UX/品質/運用 |
| 質問数 | 2〜4個（構造化） |
| タスク粒度 | 5〜30分単位 |
| タスク形式 | What/Where/How/Why/Done when |
| エージェント構成 | 指揮者 + 実装 + 検証 + レビュー |
| 完了判定 | レビュー役が兼任 |
| 完了条件 | 全テスト通過、lint 0、ビルド成功、レビュー承認 |
| エスカレーション | 3回失敗でユーザーへ |
| 最終確認 | ユーザーに確認を求める |

## スキル一覧（Skills）

ユーザーが呼び出すコマンド形式のスキル。

### Plan & Dig Phase

| スキル | 役割 | 状態 |
|--------|------|------|
| dig | 曖昧性解消 | ✓ 作成済み |
| decompose | タスク分解 | ✓ 作成済み |
| evaluate | 評価・承認 | ✓ 作成済み |

## エージェント一覧（Agents）

自律的に動作するエージェント。conductorが状況に応じて選択・実行する。

### Do Phase

| エージェント | 役割 | 状態 |
|--------------|------|------|
| conductor | 指揮者（状況判断・エージェント選択） | ✓ 作成済み |
| implementer | 実装者（コード作成・編集） | ✓ 作成済み |
| validator | 検証者（テスト・lint・ビルド） | ✓ 作成済み |
| reviewer | レビュー役 + 完了判定 | ✓ 作成済み |

## ディレクトリ構造

```
artifacts/bundles/autonomous-workflow/
├── README.md           # このファイル
├── rules/              # ワークフロー用ルール
├── skills/             # ユーザー呼び出しスキル
│   ├── dig/
│   │   └── SKILL.md
│   ├── decompose/
│   │   └── SKILL.md
│   └── evaluate/
│       └── SKILL.md
└── agents/             # 自律エージェント
    ├── conductor/
    │   └── AGENT.md
    ├── implementer/
    │   └── AGENT.md
    ├── validator/
    │   └── AGENT.md
    └── reviewer/
        └── AGENT.md
```

## 使い方

### 基本的な流れ

1. タスク依頼を受けたら `/dig` で曖昧性を解消
2. `/decompose` でタスクを分解
3. `/evaluate` で計画をレビュー・承認
4. 承認後、`conductor` が自律的にタスクを実行

### コマンド一覧

```bash
# Plan & Dig Phase（スキル - ユーザーが呼び出し）
/dig        # 曖昧性解消を開始
/decompose  # タスク分解を開始
/evaluate   # 計画の評価・承認
```

### エージェント（自律動作）

Do Phaseのエージェントは `conductor` が自動的に選択・実行します。
ユーザーが直接呼び出す必要はありません。

- **conductor**: 状況判断・エージェント選択
- **implementer**: コード実装
- **validator**: テスト・lint・ビルド検証
- **reviewer**: レビュー・完了判定

### 介入ポイント

1. **evaluate 完了時**: 計画の承認/修正/中止を選択
2. **エスカレーション時**: 3回失敗した場合に介入
3. **全タスク完了時**: 最終確認

### 設定方法

このバンドルを使用するには、プロジェクトの `.claude/` ディレクトリにスキルファイルを配置してください。
